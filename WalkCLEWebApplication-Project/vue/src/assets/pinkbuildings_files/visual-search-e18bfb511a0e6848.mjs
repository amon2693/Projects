(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[14865],{781728:(e,l,a)=>{"use strict";var n,i,t,s,r,o,u,d,c,g,p,m,h,y,_,k,S,f,F,x,T,b,P,K,v,L,w,E,A,C,I,D,j,R,O,M,N;a.r(l),a.d(l,{default:()=>Z});let H=(n=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],i=[{kind:"Variable",name:"pin",variableName:"pinId"}],t={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},s=[{kind:"Literal",name:"spec",value:"736x"}],c={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},_={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},k=[d={alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],S=[{kind:"Literal",name:"spec",value:"236x"}],f=[{kind:"Literal",name:"spec",value:"474x"}],P={alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},K=[p,F={alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"imageMediumUrl",storageKey:null},T={alias:null,args:null,kind:"ScalarField",name:"imageSmallUrl",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},y],v=[h,r],L=[t],w={alias:null,args:null,concreteType:"OfferSummary",kind:"LinkedField",name:"offerSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"maxPrice",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"minPrice",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"price",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"standardPrice",storageKey:null}],storageKey:null},E={alias:"productId",args:null,kind:"ScalarField",name:"id",storageKey:null},I={alias:"image236x",args:S,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:C=[{alias:null,args:null,concreteType:"Thumbnails",kind:"LinkedField",name:"canonicalImage",plural:!1,selections:A=[o,r,u],storageKey:null},g],storageKey:'additionalImagesPerSpec(spec:"236x")'},D={alias:"image474x",args:f,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:C,storageKey:'additionalImagesPerSpec(spec:"474x")'},R={alias:"image564x",args:j=[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:C,storageKey:'additionalImagesPerSpec(spec:"564x")'},O={alias:"image736x",args:s,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:C,storageKey:'additionalImagesPerSpec(spec:"736x")'},M={alias:null,args:null,kind:"ScalarField",name:"thumbnail",storageKey:null},N=[r],{fragment:{argumentDefinitions:n,kind:"Fragment",metadata:null,name:"MobileFlashlightPageFetchDataPinQuery",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"MobileFlashlightPageFetchData_pin"}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"MobileFlashlightPageFetchDataPinQuery",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[t,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:"imageSpec_736x",args:s,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[r,o,u,d],storageKey:'images(spec:"736x")'},{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelX",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelY",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"maxAnnotationNumDocuments",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"showOnCloseup",storageKey:null},c,{alias:null,args:null,kind:"ScalarField",name:"score",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null}],storageKey:null},d,g,{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},p,{alias:null,args:null,kind:"ScalarField",name:"adMatchReason",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"advertiserId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"altText",storageKey:null},{alias:null,args:null,concreteType:"Attribution",kind:"LinkedField",name:"attribution",plural:!1,selections:[{alias:null,args:null,concreteType:"Embed",kind:"LinkedField",name:"embed",plural:!1,selections:[m],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"adDestinationUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"attributionSourceId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"autoAltText",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[p,{alias:null,args:null,kind:"ScalarField",name:"followedByMe",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isCollaborative",storageKey:null},h,{alias:null,args:null,kind:"ScalarField",name:"privacy",storageKey:null},r,y,{alias:null,args:null,kind:"ScalarField",name:"layout",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"campaignId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupDescription",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"debug",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"descriptionHtml",storageKey:null},_,{alias:null,args:null,kind:"ScalarField",name:"domain",storageKey:null},{alias:null,args:null,concreteType:"Embed",kind:"LinkedField",name:"embed",plural:!1,selections:[o,{alias:null,args:null,kind:"ScalarField",name:"src",storageKey:null},m,u],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:null,args:null,concreteType:"ImageCrop",kind:"LinkedField",name:"imageCrop",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"maxY",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"minY",storageKey:null}],storageKey:null},{alias:"imageSpec_136x136",args:[{kind:"Literal",name:"spec",value:"136x136"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:k,storageKey:'images(spec:"136x136")'},{alias:"imageSpec_170x",args:[{kind:"Literal",name:"spec",value:"170x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:k,storageKey:'images(spec:"170x")'},{alias:"imageSpec_236x",args:S,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:k,storageKey:'images(spec:"236x")'},{alias:"imageSpec_474x",args:f,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:k,storageKey:'images(spec:"474x")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:k,storageKey:'images(spec:"orig")'},{alias:null,args:null,kind:"ScalarField",name:"isDownstreamPromotion",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPdp",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForWebCloseup",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isOosProduct",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isStaleProduct",storageKey:null},{alias:null,args:null,concreteType:"Domain",kind:"LinkedField",name:"linkDomain",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"officialUser",plural:!1,selections:[p,F,x,T,{alias:null,args:null,kind:"ScalarField",name:"isPrimaryWebsiteVerified",storageKey:null},b,y],storageKey:null},y,t],storageKey:null},P,{alias:null,args:null,kind:"ScalarField",name:"mobileLink",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:K,storageKey:null},{alias:null,args:null,concreteType:"PinJoin",kind:"LinkedField",name:"pinJoin",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"visualAnnotation",storageKey:null},{alias:null,args:null,concreteType:"AnnotationsWithLinks",kind:"LinkedField",name:"annotationsWithLinksArray",plural:!0,selections:v,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shoppingKlpUrls",storageKey:null},{alias:null,args:null,concreteType:"SeoBreadcrumbs",kind:"LinkedField",name:"seoBreadcrumbs",plural:!0,selections:v,storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[p,y],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[p,{alias:null,args:null,kind:"ScalarField",name:"explicitlyFollowedByMe",storageKey:null},F,x,T,b,y,{alias:null,args:null,kind:"ScalarField",name:"imageLargeUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isVerifiedMerchant",storageKey:null},{alias:null,args:null,concreteType:"VerifiedIdentity",kind:"LinkedField",name:"verifiedIdentity",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"verified",storageKey:null}],storageKey:null},t],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"promoter",plural:!1,selections:[p,F,x,T,b,y,t],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"promotedIsRemovable",storageKey:null},{alias:null,args:null,concreteType:"ReactionCountModel",kind:"LinkedField",name:"reactionCountsData",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"reactionType",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"reactionCount",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[_,c,{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:L,storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[t,h,w,{alias:null,args:null,concreteType:"Brand",kind:"LinkedField",name:"brand",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"signature",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ShippingInfo",kind:"LinkedField",name:"shippingInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"freeShippingPrice",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"freeShippingValue",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ProductVariantSet",kind:"LinkedField",name:"variantSet",plural:!1,selections:[{alias:null,args:null,concreteType:"DimensionMetadata",kind:"LinkedField",name:"dimensionMetadata",plural:!0,selections:[h,{alias:null,args:null,kind:"ScalarField",name:"values",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ProductVariant",kind:"LinkedField",name:"variants",plural:!0,selections:L,storageKey:null}],storageKey:null},E,I,D,R,O],storageKey:null},{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:[t,{alias:null,args:null,kind:"ScalarField",name:"fromAggregatedData",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,concreteType:"AggregateRatingMetadata",kind:"LinkedField",name:"aggregateRating",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"bestRating",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ratingValue",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"reviewCount",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"displayCookTime",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[h,w,{alias:null,args:null,kind:"ScalarField",name:"itemId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"itemSetId",storageKey:null},E,I,D,R,O],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"siteName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"typeName",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"seoUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shoppingFlags",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shouldOpenInStream",storageKey:null},{alias:null,args:null,concreteType:"Interest",kind:"LinkedField",name:"sourceInterest",plural:!1,selections:[p,h,{alias:null,args:null,kind:"ScalarField",name:"urlName",storageKey:null},y],storageKey:null},{alias:null,args:null,concreteType:"Sponsorship",kind:"LinkedField",name:"sponsorship",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"creator",plural:!1,selections:K,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"sponsor",plural:!1,selections:K,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"hasProductPins",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isDeleted",storageKey:null},{alias:null,args:null,concreteType:"StoryPinMetadataField",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"pinTitle",storageKey:null}],storageKey:null},y,{alias:null,args:null,kind:"ScalarField",name:"staticPageCount",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalVideoDuration",storageKey:null},{alias:null,args:null,concreteType:"StoryPinPage",kind:"LinkedField",name:"pages",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"blocks",plural:!0,selections:[t,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"blockType",storageKey:null},{alias:null,args:null,concreteType:"StoryPinVideoMetadata",kind:"LinkedField",name:"video",plural:!1,selections:[{alias:"entityId",args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"StoryPinVideoFormats",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"vHLSV3MOBILE",plural:!1,selections:[o,M,u,r],storageKey:null}],storageKey:null}],storageKey:null}],type:"StoryPinVideoBlock",abstractKey:null}],storageKey:null}],storageKey:null},t],storageKey:null},c,{alias:null,args:null,kind:"ScalarField",name:"trackedLink",storageKey:null},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"videos",plural:!1,selections:[p,{alias:null,args:null,concreteType:"VideoList",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"v720P",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"duration",storageKey:null},o,u,r,t],storageKey:null},{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"vHLSV4",plural:!1,selections:[t,o,M,r,u],storageKey:null},{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"vHLSV3MOBILE",plural:!1,selections:L,storageKey:null},t],storageKey:null},y],storageKey:null},{alias:null,args:null,concreteType:"PinRecommendationReason",kind:"LinkedField",name:"recommendationReason",plural:!1,selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[h,r,y],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"reason",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"reasonId",storageKey:null},{alias:null,args:null,concreteType:"PinThroughProperties",kind:"LinkedField",name:"throughProperties",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"data",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"key",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PinCarouselData",kind:"LinkedField",name:"carouselData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null},{alias:null,args:null,concreteType:"PinCarouselSlot",kind:"LinkedField",name:"carouselSlots",plural:!0,selections:[c,{alias:null,args:null,kind:"ScalarField",name:"details",storageKey:null},P,{alias:"slotId",args:null,kind:"ScalarField",name:"id",storageKey:null},g,{alias:"imagesSpec_236x",args:S,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:A,storageKey:'images(spec:"236x")'},{alias:"image236x",args:S,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:A,storageKey:'images(spec:"236x")'},{alias:"image474x",args:f,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:A,storageKey:'images(spec:"474x")'},{alias:"image564x",args:j,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:A,storageKey:'images(spec:"564x")'},{alias:"image736x",args:s,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:A,storageKey:'images(spec:"736x")'}],storageKey:null},y,p,t],storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]},{alias:null,args:null,concreteType:"AdTargetingAttribution",kind:"LinkedField",name:"adTargetingAttribution",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"geoPostalCode",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"geoRegion",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isCustomerListMatched",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isShoppingRetargetingMatched",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isActalikeMatched",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEngagementMatched",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isExpandTargetingMatched",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isFromGpsLocation",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isVisitorMatched",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isShoppingProspectingMatched",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPlPersonaMatched",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"matchedAgeBucket",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"matchedDevice",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"matchedGender",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"matchedInterest",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"matchedKeyword",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"matchedLocale",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isFirstPartyAdPersonalizationEnabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isThirdPartyAdPersonalizationEnabled",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"promotedPartnershipAdvertiserName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"promotedPartnershipAttributionName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPromotedPartnership",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"digitalMediaSourceType",storageKey:null},{alias:null,args:null,concreteType:"AdData",kind:"LinkedField",name:"adData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"excludeFromGridRepTests",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isShopTheLook",storageKey:null},y],storageKey:null},{alias:"image236x",args:S,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:A,storageKey:'images(spec:"236x")'},{alias:"image474x",args:f,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:A,storageKey:'images(spec:"474x")'},{alias:"image564x",args:j,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:A,storageKey:'images(spec:"564x")'},{alias:"image736x",args:s,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:A,storageKey:'images(spec:"736x")'},{alias:"imageSpec_60x60",args:[{kind:"Literal",name:"spec",value:"60x60"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:N,storageKey:'images(spec:"60x60")'},{alias:"imageSpec_564x",args:j,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:N,storageKey:'images(spec:"564x")'},{alias:"imageSpec_600x315",args:[{kind:"Literal",name:"spec",value:"600x315"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:N,storageKey:'images(spec:"600x315")'},{alias:null,args:null,kind:"ScalarField",name:"isUnsafe",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"originPinner",plural:!1,selections:[F,b,y],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isThirdPartyAd",storageKey:null},y],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"435551c8c01c659d1238510d05e5b86cf62e9914092f7e0a7c03e2bf1a5932f5",metadata:{},name:"MobileFlashlightPageFetchDataPinQuery",operationKind:"query",text:null}});H.hash="43378aa2f16f3b04da4a3a5bc76ab36f";let Z=H;!function(e){if("query"===e.params.operationKind){if(window.__pwsCacheRelayConcreteRequest)window.__pwsCacheRelayConcreteRequest(e);else{let l=[e.params.name,e.params.id].join(":");window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__=window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__||{},window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__[l]=e}}}(H.default||H)},328898:(e,l,a)=>{"use strict";a.r(l),a.d(l,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MobileFlashlightPageFetchData_pin",selections:[{args:null,kind:"FragmentSpread",name:"MobileFlashlightPage_pin"}],type:"Pin",abstractKey:null};n.hash="df8cf9d2521b1a82156cc4ecd7b04884";let i=n},521990:(e,l,a)=>{"use strict";a.r(l),a.d(l,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MobileFlashlightPage_pin",selections:[{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"736x")'},{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelX",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelY",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"maxAnnotationNumDocuments",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"showOnCloseup",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"score",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{args:null,kind:"FragmentSpread",name:"UnifiedPinRep_pin"}],type:"Pin",abstractKey:null};n.hash="70b3aa3bf525e76f3ccd63bc1003fe8a";let i=n},706737:(e,l,a)=>{(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||[]).push(["www/pin/[id]/visual-search",function(){return a(925e3).Z}])},207993:(e,l,a)=>{"use strict";a.d(l,{Z:()=>i});var n=a(785893);let i=(0,n.jsx)("svg",{fill:"none",height:"5",viewBox:"0 0 37 5",width:"37",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("rect",{fill:"#E9E9E9",height:"5",rx:"2.5",width:"37"})})},262032:(e,l,a)=>{"use strict";a.d(l,{Z:()=>r});var n=a(667294),i=a(883119);let t=(0,n.createContext)();var s=a(785893);function r(e){(0,n.useContext)(t);let{alt:l,color:a,children:r,crossOrigin:o,decoding:u,elementTiming:d,fetchPriority:c,fit:g,loading:p,naturalHeight:m,naturalWidth:h,onError:y,onLoad:_,role:k,sizes:S,src:f,srcSet:F,_fixCompletedOnLoad:x}=e;return(0,s.jsx)(i.Ee,{_fixCompletedOnLoad:x,alt:l,color:a,crossOrigin:o,decoding:u,elementTiming:d,fetchPriority:c,fit:g,loading:p,naturalHeight:m,naturalWidth:h,onError:y,onLoad:_,role:k,sizes:S,src:f,srcSet:F,children:r})}},448318:(e,l,a)=>{"use strict";a.d(l,{Z:()=>o});var n=a(667294),i=a(262032),t=a(785893);let s=e=>document.querySelector(`img[src="${e}"]`)||null,r=(e,l,a)=>{let i=(0,n.useRef)(null),t=(0,n.useRef)(null);(0,n.useEffect)(()=>{if(e!==i.current||a&&a!==t.current){i.current=e;let a=s(e);a?.complete&&l()}t.current=a},[e,l,a])};function o({alt:e,children:l,color:a,elementTiming:n,isActive:s=!1,naturalHeight:o,naturalWidth:u,onLoad:d,src:c,fit:g="none"}){return r(c,d,s),(0,t.jsx)(i.Z,{alt:e,color:a,elementTiming:n,fit:g,naturalHeight:o,naturalWidth:u,onLoad:d,src:c,children:l})}},760101:(e,l,a)=>{"use strict";a.d(l,{G:()=>r,Z:()=>o});var n=a(667294),i=a(616550),t=a(785893);let s=(0,n.createContext)(!0);function r({children:e}){let l=(0,i.TH)(),[a,r]=(0,n.useState)(!0),o=(0,n.useRef)(l);return(0,n.useEffect)(()=>{o.current!==l&&(o.current=l,r(!1))},[l]),(0,t.jsx)(s.Provider,{value:a,children:e})}function o(){return(0,n.useContext)(s)}},429218:(e,l,a)=>{"use strict";a.d(l,{Z:()=>i});var n=a(667294);let i=()=>{let e=(0,n.useRef)(!1);return(0,n.useEffect)(()=>(e.current=!0,()=>{e.current=!1}),[]),e}},810052:(e,l,a)=>{"use strict";a.d(l,{D:()=>n,a:()=>i});let{Provider:n,useMaybeHook:i}=(0,a(342513).Z)("unauthPageWrapperContext")},336184:(e,l,a)=>{"use strict";a.d(l,{Z:()=>F});var n=a(667294),i=a(883119),t=a(140017),s=a(340523),r=a(448318),o=a(5859),u=a(71328),d=a(554786),c=a(760101),g=a(894965),p=a(785893);function m({children:e,isImagePinForUnauthOnTablet:l}){let{isAuthenticated:a}=(0,o.B)();return(0,p.jsxs)(i.xu,{alignItems:"center",bottom:!0,dangerouslySetInlineStyle:{__style:{cursor:"pointer",width:l?"40vw":void 0}},display:"flex",justifyContent:"center",left:!0,position:"absolute",right:!l||void 0,top:!0,zIndex:a?void 0:g.e,children:[(0,p.jsx)(i.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{backgroundColor:"#000",borderRadius:"6px 6px 0 0",WebkitTransition:"opacity .04s linear",transition:"opacity .04s linear"}},left:!0,opacity:.4,position:"absolute",right:!0,top:!0}),e]})}var h=a(48481),y=a(217058),_=a(623409);function k({setShowClickthroughOverlay:e,isEligibleForPdp:l,isEligibleForDesktopSocialInviteOverlay:a,inviterFirstName:s}){let r=(0,t.ZP)(),o=(0,_.Z)(),u=(0,h.Z)(),c=(0,n.useRef)(),g="desktop"===(0,d.ZP)(),m=s&&a,k=m&&(r._('Sign up to join {{ name }} on Pinterest', 'pin.closeup.wash.desktop.shareNotification', 'Clickthrough overlay for desktop users that a sender ({{ name }}) shared a Pin to them, name: username')).replace("{{ name }}",s),S=r._('Click to make the most out of this idea with a free account', 'web.unauth.plp.clickable_wash.header', 'Copy shown on hover to sign up for an account'),f=r._('Tap to make the most out of this idea with a free account', 'mweb.unauth.plp.clickable_wash.header', 'Pin clickable wash header text');return(0,p.jsx)(i.iP,{onMouseEnter:()=>{m&&(0,y.My)("dweb.main_pin.social.wash.view"),(0,y.My)("dweb.pin.wash.view")},onMouseLeave:()=>{m?o({action:"dismiss",item:"main-pin-social-wash"}):o({action:"dismiss",item:"main-pin-wash"})},onTap:({event:e})=>{g&&(e.preventDefault(),o({action:"click",item:"pin-image"}),a&&s&&o({action:"click",item:"main-pin-social-wash"}),o({action:"click",item:"main-pin-image-signup-modal"}),u({reason:"UPSELL_LOGIN_OR_SIGNUP",attributionLabel:"click_closeup",desktopOptions:{modalType:"signup",modalOptions:{source:"defaultSource",container:"pinWash"}}}),l&&o({action:"click",item:"pdp-pin-image"}))},children:(0,p.jsxs)(i.xu,{zIndex:new i.Ry(2),children:[(0,p.jsx)(i.xu,{ref:c,alignItems:"center",bottom:!0,"data-test-id":"main-pin-hover-overlay",direction:"column",display:"flex",height:"100%",justifyContent:a?"center":void 0,left:!0,position:"absolute",right:!0,top:!0,width:"100%",children:(0,p.jsx)(i.xu,{alignItems:"center",direction:"column",display:"flex",maxWidth:240,paddingY:10,children:(0,p.jsx)(i.xu,{marginTop:8,children:(0,p.jsx)(i.X6,{align:"center",color:"light",size:m?"500":"400",children:g?k||S:f})})})}),!g&&(0,p.jsx)(i.xu,{marginEnd:4,marginTop:4,position:"absolute",right:!0,top:!0,children:(0,p.jsx)(i.hU,{accessibilityLabel:r._('Close pin clickable wash', 'mweb.unauth.plp.clickable_wash.close_button', 'Close button'),icon:"cancel",iconColor:"white",onClick:({event:l})=>{l.stopPropagation(),e&&(e(!1),o({action:"dismiss",item:"main-pin-hover-overlay"}))},size:"md"})})]})})}var S=a(174281),f=a(810052);let F=e=>{let l=(0,t.ZP)(),{alt:a,clickthroughOverlayOptions:g,color:h,isFlashlightPage:y,naturalHeight:_,naturalWidth:F,placeholder:x,pinImageResizePercent:T=100,pwtElementTimingId:b,pwtSurfaceContext:P,setShowClickthroughOverlay:K,showSpinner:v,src:L,stickyFooter:w,isEligibleForPdp:E}=e,A=(0,c.Z)(),{checkExperiment:C}=(0,s.F)(),I=!A,{isAuthenticated:D}=(0,o.B)(),j=(0,d.ZP)(),R="desktop"===j,O=D&&!R&&C("auth_mweb_inline_action_bar").anyEnabled,M=(0,n.useRef)(),[N,H]=(0,n.useState)(!I||!!L&&!!x&&x===L),Z=(0,n.useRef)(""),z=()=>{P&&P.markConstraintComplete("PinPageMainImageRendered")};(0,n.useEffect)(()=>{let e=new Image;e.onload=()=>H(!0),e.src=L},[]);let B=(0,n.useRef)(f.a()?.setHasScrolledPastMainContent);(0,n.useEffect)(()=>{let e=(0,u.Z)(()=>{if(M.current){let l=window.scrollY>M.current.offsetTop+M.current.offsetHeight;B.current?.(l),l&&window.removeEventListener("scroll",e)}},10);window.addEventListener("scroll",e)},[]);let[U,V]=(0,n.useState)();(0,n.useEffect)(()=>{M.current&&V(M.current.scrollHeight)},[]);let W=!y&&"tablet"===j,G=I?(0,p.jsx)(r.Z,{alt:a,color:h,elementTiming:b,naturalHeight:_,naturalWidth:F,onLoad:z,src:x}):null;return(0,p.jsxs)(i.xu,{ref:M,dangerouslySetInlineStyle:{__style:{transition:100===T?"":"width 500ms ease-in-out"}},"data-test-id":"pin-closeup-image",marginTop:"tablet"===j&&O?12:0,maxHeight:"100%",maxWidth:"tablet"===j?S.g6:void 0,minHeight:100===T?U:void 0,overflow:w?void 0:"hidden",position:"relative",rounding:y||"phone"===j?0:6,width:y||"phone"===j?`${T}%`:R?508:S.Hg,children:[!D&&g&&(0,p.jsx)(m,{isImagePinForUnauthOnTablet:!1,children:(0,p.jsx)(k,{inviterFirstName:Z.current,isEligibleForPdp:E,setShowClickthroughOverlay:K})}),G&&(W?(0,p.jsx)(i.xu,{overflow:"hidden",rounding:6,children:G}):G),(0,p.jsx)(i.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{opacity:N?1:0,transition:N&&!R?"opacity .5s ease-in-out":void 0,backgroundColor:h}},left:!0,overflow:W?"hidden":void 0,position:I?"absolute":"relative",right:!0,rounding:W?6:5,top:!0,children:I?(0,p.jsx)(i.Ee,{alt:a,naturalHeight:_,naturalWidth:F,src:L}):(0,p.jsx)(r.Z,{alt:a,color:h,elementTiming:b,naturalHeight:_,naturalWidth:F,onLoad:z,src:L})}),v&&(0,p.jsx)(i.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{opacity:N?0:1,transition:N?"opacity .5s ease-in-out":void 0}},display:"flex",justifyContent:"center",left:!0,position:"absolute",right:!0,top:!0,children:!N&&(0,p.jsx)(i.kC,{alignItems:"center",justifyContent:"start",children:(0,p.jsx)(i.$j,{accessibilityLabel:l._('Loading image', 'Loading higher resolution image', 'Loading higher resolution image'),show:!0})})}),w]})}},174281:(e,l,a)=>{"use strict";a.d(l,{D5:()=>r,Hg:()=>i,T_:()=>s,g6:()=>t,w6:()=>n});let n=(e,l)=>Array.from({length:l-e},(l,a)=>a+e),i=508,t=600;function s(e,l){return l.startsWith("en")?e.split(" ").map(e=>e===e.toUpperCase()?e:e.toLowerCase()).join(" "):e}let r=()=>{let e=new URL(window.location.href),l=e.hostname.replace("www.",""),a=e.pathname;return a=a.replace(/\/\d+\//,"/").replace(/\/$/,""),`${l}${a}`}},944846:(e,l,a)=>{"use strict";a.d(l,{By:()=>y,IT:()=>m,N6:()=>o,br:()=>u,jq:()=>c,lU:()=>p,mk:()=>g,tq:()=>d});var n=a(372085);let i=e=>({type:"CLEAR_RECENT_SEARCH",payload:{query:e}}),t=()=>({type:"CLEAR_RECENT_SEARCHES"}),s=e=>({type:"CLEAR_RECENT_PERSONAL_SEARCH",payload:{query:e}}),r=()=>({type:"CLEAR_RECENT_PERSONAL_SEARCHES"}),o=(e,l)=>({type:"UPDATE_CURRENT_SEARCH",payload:{query:e,scope:l}}),u=(e,l)=>({type:"UPDATE_RECENT_SEARCHES",payload:{query:e,scope:l}}),d=e=>({type:"UPDATE_RECENT_SEARCHES_BATCH",payload:{data:e}}),c=(e,l,a)=>({type:"UPDATE_TYPEAHEAD_CACHE",payload:{items:e,term:l,recent_queries_tags:a}}),g=e=>({type:"SET_ANIMATION_ON_BODY_FILTER",payload:{animated:e}}),p=(e,l,a)=>i=>{(0,n.Z)({url:"/v3/search/recent/",method:"DELETE",data:{vertical:e}}).then(l,a),i("PERSONAL"===e?r():t())},m=(e,l,a,t,r)=>o=>{a||(0,n.Z)({url:"/v3/search/recent/",method:"DELETE",data:{query:e,vertical:l}}).then(t,r),o("PERSONAL"===l?s(e):i(e))},h=e=>({type:"RELOAD_VISUAL_SEARCH_ANNOTATIONS",payload:{pinId:e}}),y=e=>l=>{l(h(e))}},925e3:(e,l,a)=>{"use strict";a.d(l,{Z:()=>eB});var n,i,t,s=a(554786),r=a(149722),o=a(667294);a(167912);var u=a(616550),d=a(883119),c=a(207012),g=a(673500),p=a(140017),m=a(340523),h=a(603642),y=a(757640),_=a(689390),k=a(545007),S=a(207229),f=a(214877),F=a(213377),x=a(901855),T=a(406893),b=a(179425),P=a(734851),K=a(627408),v=a(160567),L=a(624797),w=a(494125);function E(e,l){let a=0,n=!1,i=-1;return e.forEach((e,t)=>{let{x:s=0,y:r=0,h:o=0,w:u=0}=e,d=function(e,l){let{x:a,y:n,w:i,h:t}=e,{x:s,y:r,w:o,h:u}=l,d=Math.max(a,s),c=Math.min(a+i,s+o),g=Math.max(n,r),p=Math.min(n+t,r+u),m=d<c&&g<p?(c-d)*(p-g):0;return m/(i*t+o*u-m)}(l,{x:s,y:r,h:o,w:u});d>=.9&&d>a&&(a=d,n=!0,i=t)}),{isCropAreaOnDotArea:n,dotIndexToHide:i}}var A=a(250790),C=a(40770),I=a(755453),D=a(801690),j=a(989418),R=a(771881),O=a(696534),M=a(125768),N=a(785893);function H({handleBackClick:e,viewParameter:l,viewType:a}){let n=(0,O.vs)();return(0,N.jsx)(d.xu,{"data-test-id":"cancelButton",left:!0,margin:2,position:"fixed",top:!0,children:(0,N.jsx)(M.Z,{color:n?"darkGray":"white",disableRedirect:!0,icon:"cancel",onTouch:e,padding:3,size:"lg",viewParameter:l,viewType:a})})}var Z=a(587703),z=a(429218),B=a(585913),U=a(913574),V=a(49808),W=a(957435),G=a(336184);function Y({pinDominantColor:e,url:l,closeupImageWidth:a,closeupImageHeight:n}){let i=(0,p.ZP)();return(0,N.jsx)(G.Z,{alt:i._('Pin image', 'flashlight.cropper.closeupImage', 'Pin closeup image'),color:e,isFlashlightPage:!0,naturalHeight:n,naturalWidth:a,placeholder:l,showSpinner:!1,src:l})}let $=e=>{let{alt:l,src:a,top:n,left:i}=e;return(0,N.jsx)(d.xu,{dangerouslySetInlineStyle:{__style:{top:n,left:i}},height:24,position:"absolute",width:24,children:(0,N.jsx)(d.Ee,{alt:l,color:"transparent",naturalHeight:24,naturalWidth:24,src:a})})},q={backgroundColor:"#000000",opacity:"0.4"};function Q({closeupImageUrl:e,closeupImageDims:l,cropArea:{x:a,y:n,w:i,h:t},disableBorder:s,disableHandles:r,handleBackClick:o,onTouchEnd:u,onTouchMove:c,onTouchStart:g,pinDominantColor:m,showBackButton:h,viewParameter:y}){let _=(0,p.ZP)(),{closeupImageWidth:k,closeupImageHeight:S}=l,f=Math.floor(S*n),F=Math.floor(k*a),x=Math.floor(S*t),T=Math.floor(k*i),b=F+T,P=f+x;return(0,N.jsxs)(d.xu,{"data-test-id":"cropper-container",onTouchEnd:u,onTouchMove:c,onTouchStart:g,position:"relative",children:[(0,N.jsx)(Y,{closeupImageHeight:S,closeupImageWidth:k,pinDominantColor:m,url:e??""}),(0,N.jsx)(d.xu,{dangerouslySetInlineStyle:{__style:q},height:f,left:!0,position:"absolute",top:!0,width:"100%"}),(0,N.jsx)(d.xu,{dangerouslySetInlineStyle:{__style:{...q,top:f}},height:x,left:!0,position:"absolute",width:F}),(0,N.jsx)(d.xu,{dangerouslySetInlineStyle:{__style:{...q,top:f,left:b}},height:x,position:"absolute",right:!0}),(0,N.jsx)(d.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{...q,top:P}},left:!0,position:"absolute",width:"100%"}),h&&(0,N.jsx)(H,{handleBackClick:o,viewParameter:y,viewType:427}),!r&&(0,N.jsxs)(d.xu,{"data-test-id":"CropperHandles",children:[(0,N.jsx)($,{alt:_._('Top left cropper handle', 'flashlight.cropper.topLeftHandle', 'top left handle for cropping image'),left:F-9,src:V,top:f-9}),(0,N.jsx)($,{alt:_._('Top right cropper handle', 'flashlight.cropper.topRightHandle', 'top right handle for cropping image'),left:b-15,src:W,top:f-9}),(0,N.jsx)($,{alt:_._('Bottom left cropper handle', 'flashlight.cropper.bottomLeftHandle', 'bottom left handle for cropping image'),left:F-9,src:B,top:P-15}),(0,N.jsx)($,{alt:_._('Bottom right cropper handle', 'flashlight.Cropper.BottomLeftHandle', 'bottom right handle for cropping image'),left:b-15,src:U,top:P-15})]}),(0,N.jsx)(d.xu,{dangerouslySetInlineStyle:{__style:{top:f-2,left:F-2,border:s?void 0:"2px solid #ffffff"}},"data-test-id":"CroppedArea",height:x+4,position:"absolute",rounding:2,width:T+4})]})}var X=a(520846);function J({auxData:e,onClick:l,shouldLogDotRender:a,showNoHalo:n,style:i,viewParameter:t,x:s,y:r}){let o=(0,p.ZP)(),u=(0,Z.Z)();return(0,w.Z)(()=>{a&&u({aux_data:e,element:1221,event_type:120,view_parameter:t,view_type:72})}),(0,N.jsx)("div",{"aria-label":o._('Select a specific item on image', 'dot.accessibilityLabel', 'Accessibility label for <Dot /> component'),"data-test-id":"dot",onClick:l,onKeyPress:l,role:"button",style:{position:"absolute",top:r-16,left:s-16,outline:"none",...i},tabIndex:"0",children:(0,N.jsx)(d.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:n?void 0:"rgba(0, 0, 0, 0.1)",width:32,height:32,border:"none",borderRadius:32,cursor:l?"pointer":"default"}},children:(0,N.jsx)(d.xu,{alignItems:"center",color:"light",dangerouslySetInlineStyle:{__style:{boxShadow:"none",width:16,height:16,border:"none",borderRadius:16,top:8,left:8}},display:"flex",justifyContent:"center",padding:0,position:"absolute"})})})}var ee=a(922719);let el="flashlightDotPop",ea=(0,ee.Ll)([`
  ${el} {
      0% {
          opacity: 0;
          transform: scale(0);
      }

      100% {
          opacity: 1;
          transform: scale(1);
      }
  }
`,`labelReveal {
    0% {
      transform: scale(0, 1)
    }

    100% {
      transform: scale(1, 1)
    }
  }
`]),en=e=>{let l=parseFloat((.1*e).toFixed(2));return{animation:`${el} 0.3s ease-out ${l}s both`}};function ei({closeupImageTop:e,imageHeight:l,imageTop:a,imageWidth:n,onDotTap:i,pinId:t,pinImageSignature:s,setCropArea:r,shouldLogDotRender:u,showNoHalo:d,viewParameter:c,visualObjects:g,visualObjectToHide:p}){let m=(0,Z.Z)();return(0,N.jsxs)(o.Fragment,{children:[(0,N.jsx)(T.Z,{unsafeCSS:ea}),g.map((o,h)=>{if(h===p)return null;let{x:y=0,y:_=0,w:k=0,h:S=0}=o,f={x:y,y:_,h:S,w:k},F=(0,X.Z)({cropArea:{x:y,y:_,w:k,h:S},scaledWidth:n,scaledHeight:l}),x=Math.floor(F.x+F.w/2),T=Math.floor(F.y+a+F.h/2),b=en(h),P={pin_id:t,image_signature:s,visual_objects:JSON.stringify([f]),commerce_data:JSON.stringify({entrypoint:"flashlight",pin_is_stela:"false"})};return(0,N.jsx)(J,{auxData:P,onClick:function(){m({aux_data:P,element:1221,event_type:102,view_parameter:c,view_type:72}),i({cropArea:f,cropSource:4,visualObjects:g}),r?.(f)},shouldLogDotRender:u,showNoHalo:d,style:b,viewParameter:c,x:x,y:T-e},JSON.stringify(f))})]})}var et=a(174281);let es={OUTSIDE:0,INSIDE:1,LEFT_CROPPER:2,RIGHT_CROPPER:3,TOP_CROPPER:4,BOTTOM_CROPPER:5,TOP_LEFT_HANDLE:6,TOP_RIGHT_HANDLE:7,BOTTOM_LEFT_HANDLE:8,BOTTOM_RIGHT_HANDLE:9,NONE:10};function er({closeupImageUrl:e,closeupImageDims:l,cropArea:a,handleBackClick:n,handleChangeCloseupImageTop:i,handleCropperChange:t,headerHeight:s,inUnifiedFeedExp:r,pinDominantColor:u,pinId:c,pinImageSignature:g,showBackButton:p,viewParameter:m,visualObjects:h,visualObjectToHide:y}){let _=(0,Z.Z)(),k=(0,o.useRef)(),[S,f]=(0,o.useState)(0),[F,x]=(0,o.useState)(0),[T,b]=(0,o.useState)(es.NONE),[P,K]=(0,o.useState)(a),{current:v}=(0,z.Z)(),{x:L,y:w,w:E,h:A}=P,{closeupImageTop:C,closeupImageMinTop:I,closeupImageWidth:D,closeupImageHeight:j,minCropperWidthRatio:R,minCropperHeightRatio:O}=l,M=s||0,H=(e,l)=>{let a=l-C,n=e-(k.current?k.current.getBoundingClientRect().left:0),i=j*w,t=j*(w+A),s=D*L,r=D*(E+L);if(a>i+12&&a<t-12&&n>s+12&&n<r-12)return es.INSIDE;if(n<=s+12&&n>=s-12&&a>=i+15&&a<=t-15)return es.LEFT_CROPPER;if(n<=r+12&&n>=r-12&&a>=i+15&&a<=t-15)return es.RIGHT_CROPPER;if(n<=r-15&&n>=s+15&&a>=i-12&&a<=i+12)return es.TOP_CROPPER;if(n<=r-15&&n>=s+15&&a>=t-12&&a<=t+12)return es.BOTTOM_CROPPER;if(n<=s-9+24&&n>=s-12&&a>=i-12&&a<=i+24-9)return es.TOP_LEFT_HANDLE;if(n<=r+12&&n>=r-15&&a>=i-12&&a<=i+24-9)return es.TOP_RIGHT_HANDLE;else if(n<=s-9+24&&n>=s-12&&a>=t-15&&a<=t+12)return es.BOTTOM_LEFT_HANDLE;else if(n<=r+12&&n>=r-15&&a>=t-15&&a<=t+12)return es.BOTTOM_RIGHT_HANDLE;else return es.OUTSIDE};return(0,N.jsx)(d.kC,{justifyContent:"center",width:"100vw",children:(0,N.jsxs)(d.xu,{ref:k,dangerouslySetInlineStyle:{__style:{top:C,touchAction:"none"}},maxWidth:et.g6,overflow:"hidden",position:"fixed",width:"100%",children:[(0,N.jsx)(Q,{closeupImageDims:l,closeupImageUrl:e,cropArea:P,handleBackClick:n,onTouchEnd:()=>{[es.NONE,es.OUTSIDE].includes(T)||(_({event_type:T===es.INSIDE?7603:7604,view_parameter:m,view_type:72}),t({cropArea:P,cropSource:6,visualObjects:h}))},onTouchMove:e=>{let{clientX:l,clientY:a}=e.touches[0];if(f(l),x(a),T===es.NONE&&b(H(l,a)),null!=R&&null!=O&&null!=I){let e=a-F,n=(l-S)/D,t=e/j,s=Math.min(L+E-R,Math.max(0,L+n)),r=E+(L-s),o=Math.min(w+A-O,Math.max(0,w+t)),u=A+(w-o),d=Math.min(1-L,Math.max(R,E+n)),c=Math.min(1-w,Math.max(O,A+t));switch(T){case es.OUTSIDE:i(Math.floor(Math.max(I,Math.min(M,C+e))));break;case es.INSIDE:K(e=>({...e,x:Math.max(0,Math.min(1-E,L+n)),y:Math.max(0,Math.min(1-A,w+t))}));break;case es.LEFT_CROPPER:K(e=>({...e,x:s,w:r}));break;case es.RIGHT_CROPPER:K(e=>({...e,w:d}));break;case es.TOP_CROPPER:K(e=>({...e,y:o,h:u}));break;case es.BOTTOM_CROPPER:K(e=>({...e,h:c}));break;case es.TOP_LEFT_HANDLE:K({x:s,w:r,y:o,h:u});break;case es.TOP_RIGHT_HANDLE:K(e=>({...e,w:d,y:o,h:u}));break;case es.BOTTOM_LEFT_HANDLE:K(e=>({...e,h:c,x:s,w:r}));break;case es.BOTTOM_RIGHT_HANDLE:K(e=>({...e,h:c,w:d}))}}},onTouchStart:e=>{let{clientX:l,clientY:a}=e.touches[0];f(l),x(a),b(es.NONE)},pinDominantColor:u,showBackButton:p,viewParameter:m}),!!h.length&&0!==j&&0!==D&&(0,N.jsx)(d.xu,{"data-test-id":"FlashlightDots",children:(0,N.jsx)(ei,{closeupImageTop:C,imageHeight:j,imageTop:C,imageWidth:D,onDotTap:t,pinId:c,pinImageSignature:g,setCropArea:K,shouldLogDotRender:!v,showNoHalo:r,viewParameter:m,visualObjects:h,visualObjectToHide:y})})]})})}var eo=a(254292),eu=a(676554);let ed=e=>({type:"SET_FLASHLIGHT_CROP_SOURCE",payload:{cropSource:e}});var ec=a(944846),eg=a(670633),ep=a(774812),em=a(105737),eh=a(207993),ey=a(30378),e_=a(5859),ek=a(55202),eS=a(217058),ef=a(623409),eF=a(943484);function ex(e,l,a){var n;return(l="symbol"==typeof(n=function(e,l){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,l||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===l?String:Number)(e)}(l,"string"))?n:String(n))in e?Object.defineProperty(e,l,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[l]=a,e}let eT={baseStyles:{transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",transformOrigin:"bottom",touchAction:"none"}},eb={NONE:0,UP:1,DOWN:2};class eP extends o.Component{constructor(...e){super(...e),ex(this,"state",{currentDistanceFromTop:this.props.maxDistanceFromTop?this.props.maxDistanceFromTop:-1,headerHeight:this.props.headerHeight||0,isAtTop:!1,scrollDirection:eb.NONE,shouldAnimate:!1,startY:0,canScrollOnChildren:!1}),ex(this,"onTouchStart",e=>{let{clientY:l}=e.touches[0];this.setState({startY:l,shouldAnimate:!1,scrollDirection:eb.NONE})}),ex(this,"onTouchMove",e=>{let{clientY:l}=e.touches[0],{startY:a,currentDistanceFromTop:n}=this.state,{canMoveModal:i,maxDistanceFromTop:t}=this.props,s=l-a;i&&void 0!==t&&(s>0&&n>=0&&n<t&&window.scrollY<=0||s<0&&n<=t&&n>=0)&&this.setModalPosition(l)}),ex(this,"onTouchEnd",()=>{let{entryPoint:e,minDistanceFromTop:l,canMoveModal:a}=this.props;this.props.shouldSnapToEnds&&this.state.scrollDirection===eb.DOWN?(this.header&&ey.Z.removeObstruction("top",this.header),this.setState({canScrollOnChildren:!1,currentDistanceFromTop:this.props.maxDistanceFromTop,shouldAnimate:!0,isAtTop:!1}),e&&(0,eS.My)(`mweb.${e}.snap_to_bottom`)):this.props.shouldSnapToEnds&&this.state.scrollDirection===eb.UP&&(this.state.isAtTop?this.setState({currentDistanceFromTop:0,shouldAnimate:!0}):this.setState({canScrollOnChildren:a,currentDistanceFromTop:l||0,shouldAnimate:!0,isAtTop:!0}),this.header&&ey.Z.addObstruction("top",this.header),e&&(0,eS.My)(`mweb.${e}.sliding_modal.snap_to_top`))}),ex(this,"handleHandleMove",e=>{let{clientY:l}=e.touches[0],{canMoveModal:a,maxDistanceFromTop:n,minDistanceFromTop:i}=this.props,{startY:t,currentDistanceFromTop:s}=this.state;a&&s<=(i||0)&&l-t>0&&(e.stopPropagation(),this.setState({canScrollOnChildren:!1,currentDistanceFromTop:n,isAtTop:!1,scrollDirection:eb.NONE,shouldAnimate:!0,startY:0}))}),ex(this,"handleHeaderTouch",()=>{let{maxDistanceFromTop:e,minDistanceFromTop:l,entryPoint:a,canMoveModal:n}=this.props,{currentDistanceFromTop:i,scrollDirection:t}=this.state;t===eb.NONE&&(i===e?(this.setState({canScrollOnChildren:n,currentDistanceFromTop:l||0,shouldAnimate:!0,isAtTop:!0}),(0,eS.My)(`mweb.${a}.sliding_modal.header_touch.snap_to_top`)):e&&(this.setState({canScrollOnChildren:!1,currentDistanceFromTop:e,shouldAnimate:!0,isAtTop:!1}),(0,eS.My)(`mweb.${a}.sliding_modal.header_touch.snap_to_bottom`)))}),ex(this,"handleCloseIconTouch",e=>{let{currentDistanceFromTop:l}=this.state,{onDismiss:a,logContextEvent:n,maxDistanceFromTop:i,viewParameter:t,viewType:s}=this.props;e.stopPropagation(),a&&(n({aux_data:{commerce_data:JSON.stringify({snapped_top:0===l})},element:75,event_type:102,view_parameter:t,view_type:s}),this.setState({currentDistanceFromTop:i,startY:0,scrollDirection:eb.NONE},()=>a(e)))}),ex(this,"getModalStyles",()=>{let{shouldSnapToEnds:e}=this.props,{currentDistanceFromTop:l,shouldAnimate:a,canScrollOnChildren:n}=this.state,{baseStyles:i}=eT;return{...i,animation:"modalReveal 0.3s ease-out both",position:n?"absolute":"fixed",top:l>-1?l:void 0,bottom:0,width:"100vw",...e&&a?{transitionDuration:"500ms",transitionProperty:"transform, opacity, top"}:Object.freeze({})}}),ex(this,"setModalPosition",e=>{let{startY:l,currentDistanceFromTop:a}=this.state,{maxDistanceFromTop:n,snapToEndThreshold:i,entryPoint:t}=this.props;if(n){let s=e-l,r=Math.floor("CloseupShop"===t||"CloseUpMainPinDrawer"===t?Math.max(0,a+s):Math.min(n,Math.max(0,a+s))),o=eb.NONE;if(void 0!==i&&i>=0){let e=Math.floor(i*n),l=Math.floor((1-i)*n);s<0?o=r>l?eb.DOWN:eb.UP:s>0&&(o=r>e?eb.DOWN:eb.UP)}this.setState({startY:e,currentDistanceFromTop:r,scrollDirection:o})}})}componentDidMount(){let{isOpen:e}=this.props;e&&ey.Z.pause()}componentDidUpdate(e,l){let{domainFilters:a,priceFilters:n,cropSource:i,isOpen:t,logContextEvent:s,maxDistanceFromTop:r,setHasDraggedDrawerToFullScreen:o,minDistanceFromTop:u,entryPoint:d}=this.props,{currentDistanceFromTop:c}=this.state;t&&!e.isOpen?ey.Z.pause():!t&&e.isOpen&&ey.Z.resume(),"CloseUpMainPinDrawer"===d&&r<e.maxDistanceFromTop&&c>r&&this.handleHeaderTouch(),l.currentDistanceFromTop!==(e.minDistanceFromTop||0)&&c===(u||0)&&o&&o(!0),a&&n&&(!(0,em.ZP)(a,e.domainFilters)||!(0,em.ZP)(n,e.priceFilters))&&s({event_type:13,view_parameter:"related_products"===(0,eF.Z)(i)?3455:3456,view_type:72,element:11735})}componentWillUnmount(){let{isOpen:e}=this.props;this.header&&ey.Z.removeObstruction("top",this.header),e&&ey.Z.resume()}render(){let{children:e,headerChildren:l,heading:a,inUnifiedFeedExp:n,isOpen:i,isRTL:t,mobileAccessibilityCloseIconLabel:s,mobileHideCloseIcon:r,noDivider:o,showHandle:u}=this.props,{headerHeight:c,canScrollOnChildren:g}=this.state,p=!g&&n?"32px 32px 0 0":"0";return i?(0,N.jsx)(ek.Z,{children:(0,N.jsx)(d.xu,{"aria-label":a,role:"dialog",children:(0,N.jsx)(d.xu,{color:"default",dangerouslySetInlineStyle:{__style:{...this.getModalStyles(),borderRadius:p}},onTouchEnd:this.onTouchEnd,onTouchMove:this.onTouchMove,onTouchStart:this.onTouchStart,children:(0,N.jsxs)(d.iP,{accessibilityLabel:this.props.i18n._('View all search results', 'SlidingModal.Header.a11yLabel', 'Accessibility label for header of search results in flashlight'),onTap:this.handleHeaderTouch,children:[(0,N.jsxs)(d.Le,{top:c||0,children:[u&&(0,N.jsx)(d.xu,{color:"default",dangerouslySetInlineStyle:{__style:{padding:"8px 0 24px 0",borderRadius:p}},"data-test-id":"slidingModalHandle",display:"flex",justifyContent:"center",onTouchMove:this.handleHandleMove,children:eh.Z}),!r&&(0,N.jsxs)(d.xu,{ref:e=>{this.header=e},color:"default",rounding:2,children:[(0,N.jsxs)(d.kC,{alignItems:"center",flex:"grow",justifyContent:"start",children:[(0,N.jsx)(d.kC,{alignItems:"center",justifyContent:"start",children:(0,N.jsx)(d.hU,{accessibilityLabel:s||"Close visual search results",icon:"arrow-back",iconColor:"gray",onClick:({event:e})=>this.handleCloseIconTouch(e),padding:5,size:"lg"})}),(0,N.jsx)(d.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:function({filterIconShown:e,isRTL:l}){let a=l?"marginRight":"marginLeft",n=l?"marginLeft":"marginRight";return e?{[a]:38,[n]:50,marginTop:15,marginBottom:15}:{[a]:-10,[n]:50,marginTop:15,marginBottom:15}}({isRTL:t})},"data-test-id":"slidingModalHeader",display:"flex",flex:"grow",justifyContent:"center",children:(0,N.jsx)(d.X6,{accessibilityLevel:2,align:"center",size:"400",children:a})})]}),l||null,!o&&(0,N.jsx)(d.iz,{})]})]}),(0,N.jsx)(d.xu,{overflow:g?"auto":"visible",children:e})]})})})}):null}}function eK(e){let l=(0,p.ZP)(),a=(0,Z.Z)(),{isRTL:n}=(0,e_.B)(),i=(0,ef.Z)();return(0,N.jsx)(eP,{...e,i18n:l,isRTL:n,logContextEvent:a,trackInteraction:i})}let ev=`
  html, body {
    overscroll-behavior: none;
  }
`;function eL(){return Math.min(et.g6,window.innerWidth)}function ew(e,l){return Math.floor(eL()/l*e)}function eE(e,l){let a=0,n=0,i=0;if(e&&e.imageSpec_736x){var t,s;let l=e?e.imageSpec_736x:null;a=eL(),n=ew(l?.height??1,l?.width??1),t=l?.height??1,s=l?.width??1,i=Math.min(Math.floor(.6*window.innerHeight),ew(t,s))}return{closeupImageWidth:a,closeupImageHeight:n,closeupImageMinTop:i-n,closeupImageTop:l||0,minCropperWidthRatio:a?50/a:0,minCropperHeightRatio:n?50/n:0,modalTop:i}}function eA(e,l,a,n,i){let t=a?Number(a):.4,s=n?Number(n):.1;return e>0&&l>0&&(a||(t=(l-2*l*.1-i)/e),n||(s=.1*l/e)),{h:t,y:s}}function eC({cropArea:e,cropSource:l,headerHeight:a,inUnifiedFeedExp:n,isShopTheLookFeed:i,pin:t,pinId:s,queryH:c,queryY:g,requestParams:h,searchResourceOptions:y,setCropSource:_,setState:v,state:L,surfaceType:A,visualSearchFlashlightUnifiedResource:C}){let O=(0,p.ZP)(),{logContextEvent:M}=(0,f.v)(),Z=(0,k.I0)(),z=(0,u.k6)(),{previous:B}=(0,x.Hv)(),{checkExperiment:U}=(0,m.F)(),V=(0,u.TH)(),{isAuth:W}=(0,r.Z)(),{width:G=0}=(0,S.Z)()||{},Y=(t?.visualObjects??[]).filter(e=>e.isStela),$=(t?.visualObjects??[]).filter(e=>!!e.label),q=((Y.length>0||$.length>0)&&(U("mweb_flashlight_show_more_stela_dots").anyEnabled||U("mweb_flashlight_show_more_stela_dots_expansion").anyEnabled?Y:$)||[]).map(e=>{let{isStela:l,title:a,label:n,labelId:i,labelX:t,labelY:s,maxAnnotationNumDocuments:r,score:o,showOnCloseup:u,x:d,y:c,h:g,w:p}=e;return{is_stela:l??!1,title:a??"",label:n??"",label_id:i??"",label_x:t??0,label_y:s??0,max_annotation_num_documents:r??0,score:o??0,show_on_closeup:u??!1,x:d??0,y:c??0,h:g??0,w:p??0}}),[Q,X]=(0,o.useState)(E(q,e)),{isCropAreaOnDotArea:J,dotIndexToHide:ee}=Q,el=e=>Z((0,ec.By)(e)),ea=e=>Z(ed(e)),{data:en,fetchMore:ei,isAtEnd:et,isFetching:es,isLoaded:em}=C||{},eh=en?.results||[],ey=eh.find(e=>"story"===e.type),e_=!!ey&&"stl"!==A,ek=eh.flatMap(e=>"pin"===e.type?e:[]),{url:eS=`/pin/${s}`,text:ef=""}=ey?.action||{},eF=O._('Shop similar', 'mobileFlashlight.productUpsellTitle', 'Shop similar products from the image.'),ex=O._('Image search', 'mobileFlashlight.organicFeedTitle', 'Search results from the image.'),eT=O._('Shop the look', 'mobileFlashlight.shopTheLookFeedTitle', 'Shop the look for similar products from the cropped image.'),eb=i?eT:ex,eP=O._('Visual search', 'Visual search results', 'Visual search results'),eL=n||i,{closeupImageWidth:ew,modalTop:eC}=L.closeupImageDims,eI=t?.imageSpec_736x?.url??"",eD=G-60<ew&&eL,ej=!eD&&eL;function eR(){if(0===B.length){z.replace(`/pin/${s}/`);return}z.goBack()}let[eO,eM]=(0,o.useState)(0),[eN,eH]=(0,o.useState)(0),[eZ,ez]=(0,o.useState)(!1),[eB,eU]=(0,o.useState)(!1),[eV,eW]=(0,o.useState)(void 0);function eG(){eU(!1),ez(!1),eW(void 0)}function eY(e,l){"vertical"!==l&&e.stopPropagation()}let e$=!!t,eq=(0,o.useMemo)(()=>eE(t,a),[t?.entityId,a]);if((0,o.useEffect)(()=>{if(e$){let{closeupImageHeight:e,modalTop:l=0}=eq,n=eA(e,l,Number(c),Number(g),a||0);v(e=>({...e,closeupImageDims:eq,...n}))}},[e$,eq]),(0,w.Z)(()=>{ea(l)}),!t||0===eC)return null;let{auxData:eQ,viewType:eX,viewParameter:eJ}=function({cropSource:e,inUnifiedFeedExp:l,isCropAreaOnDotArea:a,isProductPage:n,surfaceType:i}){let t=l||"stl"===i,s=4===e||a,r=n?"product":"stl"===i?s?"product":"organic":l&&s?"unified":"organic";return{auxData:(()=>{let e=e=>({commerce_data:JSON.stringify({is_product_only_feed:e})});return"product"===r?e(!0):"unified"===r?e(!1):t?e(!1):void 0})(),viewType:"product"===r?427:72,viewParameter:"organic"===r?3050:3462}}({cropSource:l,inUnifiedFeedExp:n,isCropAreaOnDotArea:J,isProductPage:!1,surfaceType:A});function e0(){M({component:14339,element:179,event_type:102,view_parameter:eJ,view_type:eX})}return(0,N.jsxs)(o.Fragment,{children:[(0,N.jsx)(T.Z,{unsafeCSS:ev}),(0,N.jsx)(D.Z,{auxData:eQ,viewParameter:eJ,viewType:eX,children:(0,N.jsx)(K.Z,{view:eX,children:(0,N.jsxs)(b.default,{hasFixedHeader:!0,hasGutter:!1,children:[(0,N.jsx)(eo.Z,{text:O._('Visual Search Page', 'flashlight.accessibilityhiddenheading.fullpage', 'accessibility label for flashlight page')}),(0,N.jsx)(d.xu,{color:"dark",height:"100vh",width:"100vw"}),(0,N.jsx)(er,{closeupImageDims:L.closeupImageDims,closeupImageUrl:eI,cropArea:e,handleBackClick:eR,handleChangeCloseupImageTop:function(e){v(l=>({...l,closeupImageDims:{...l.closeupImageDims,closeupImageTop:e}}))},handleCropperChange:function({cropArea:e,cropSource:l,visualObjects:a}){ea(l),el(s),X(E(a,e)),_(l),v(l=>({...l,...e})),z.replace((0,I.Z)({cropArea:e,cropSource:l,isProductPage:!1,pinId:s,requestParams:h,surfaceType:A}))},headerHeight:a,inUnifiedFeedExp:eL,pinDominantColor:t.dominantColor||"#efefef",pinId:s,pinImageSignature:t.imageSignature,showBackButton:eD,viewParameter:eJ,visualObjects:q,visualObjectToHide:ee}),ej&&(0,N.jsx)(H,{handleBackClick:eR,viewParameter:eJ,viewType:427}),(0,N.jsxs)(eK,{canMoveModal:!0,cropSource:l,entryPoint:"flashlight",headerHeight:a,heading:eP,inUnifiedFeedExp:eL,isOpen:!0,location:V,maxDistanceFromTop:eC||0,minDistanceFromTop:W?60:a,mobileAccessibilityCloseIconLabel:O._('Close visual search results', 'close visual search results and go back to pin', 'close visual search results and go back to pin'),mobileHideCloseIcon:eL,noBorder:!0,noDivider:!0,noMaskOnBackground:!0,onDismiss:eR,pinId:s,shouldSnapToEnds:!0,showHandle:eL,snapToEndThreshold:.3,viewParameter:eJ,viewType:eX,children:[(0,N.jsx)(d.$j,{accessibilityLabel:O._('Loading visual search results', 'mobileFlashlightPage.loadingSpinner', 'Spinner for loading the visual search result'),show:eL&&!em}),eL&&em&&(0,N.jsxs)(o.Fragment,{children:[e_&&(0,N.jsxs)(o.Fragment,{children:[(0,N.jsxs)(d.xu,{alignItems:"center",direction:"row",display:"flex",justifyContent:"between",marginBottom:2,paddingX:4,children:[(0,N.jsx)(d.Tg,{href:eS,onTap:({event:e})=>{e.stopPropagation(),e0()},tapStyle:"compress",children:(0,N.jsx)(d.X6,{accessibilityLevel:2,size:"400",children:eF})}),(0,N.jsx)(d.I_,{accessibilityLabel:ef||O._('See more', 'headerModule.headerModuleActionButton.iconButton', 'An right arrow icon button to show more similar pins to the user in a new page'),bgColor:"transparent",dataTestId:"product-upsell-action-button",href:eS,icon:"arrow-forward",iconColor:"darkGray",onClick:e0,size:"sm"})]}),(0,N.jsx)(d.xu,{dangerouslySetInlineStyle:{__style:{touchAction:"pan-x",overflowY:"hidden"}},onTouchEnd:function(e){eY(e,eV),eG()},onTouchMove:function(e){let{clientX:l,clientY:a}=e.touches[0],n=Math.abs(l-eO);Math.abs(a-eN)>10&&ez(!0),n>10&&eU(!0),eB&&eZ?eW(e=>e||"vertical"):eB?eW(e=>e||"horizontal"):eZ?eW(e=>e||"vertical"):eW(void 0),eY(e,eV)},onTouchStart:function(e){let{clientX:l,clientY:a}=e.touches[0];eM(l),eH(a),eG()},children:(0,N.jsx)(P.default,{component:14339,disableHeader:!0,story:ey,storyKey:ey?{type:"deprecated",data:ey}:null,surface:"ShoppingDynamicHeightGrid",view:eX,viewParameter:eJ})})]}),(0,N.jsx)(d.xu,{marginBottom:3,paddingX:4,children:(0,N.jsx)(d.X6,{accessibilityLevel:2,size:"400",children:eb})}),(0,N.jsx)(d.xu,{color:"default",dangerouslySetInlineStyle:{__style:{touchAction:"pan-y"}},paddingX:F.D6,children:(0,N.jsx)(ep.Z,{feedItems:ek,feedKey:(0,eg.J)("VisualSearchFlashlightUnifiedResource",y)??"",pagination:{loadNext:ei||(()=>void 0),hasNext:!et,isLoadingNext:es||!1,refetch:()=>void 0},renderFeedItem:(e,l)=>(0,N.jsx)(R.cn,{children:(0,N.jsx)(eu.ZP,{auxData:eQ,componentType:0,duploQueryRef:null,pinId:e.id,slotIndex:l,trackingParams:e.trackingParams||void 0,trafficSource:i?"shop_feed":void 0,viewParameter:eJ,viewType:eX})})})})]}),!eL&&(0,N.jsx)(d.xu,{color:"default",paddingX:F.D6,children:(0,N.jsx)(j.ZP,{feedItemProps:{viewParameter:eJ,viewType:eX},feedKey:(0,eg.J)("VisualLiveSearchResource",y)??"",resourceConfig:{name:"VisualLiveSearchResource",options:y},trafficSource:"flashlight"})})]})]})})})]})}function eI(e){let{searchResourceOptions:l}=e,a=(0,y.Z)({name:"VisualSearchFlashlightUnifiedResource",options:l});return(0,N.jsx)(eC,{...e,visualSearchFlashlightUnifiedResource:a})}let eD=void 0!==n?n:n=a(521990);function ej({pinKey:e}){let{checkExperiment:l}=(0,m.F)(),a=l("mweb_flashlight_unified_feed").anyEnabled||l("mweb_unified_visual_features_expansion").anyEnabled,n=(0,u.$B)(),{pinId:i}=(0,_.Z)(n.params.id||""),t=(0,u.TH)(),{cropSource:d,x:g,y:p,h,w:y,surfaceType:k,requestParams:S}=(0,L.mB)(t.search),f=k||"flashlight",{isAuth:F}=(0,r.Z)(),x=(0,s.ZP)(),T=!F&&(0,v.x9)(x)||void 0,b=(0,c.Z)(eD,e),[P,K]=(0,o.useState)(()=>{let e=eE(b,T);e.closeupImageTop=0;let{closeupImageHeight:l,modalTop:a=0}=e,n=eA(l,a,Number(h),Number(p),T||0);return{closeupImageDims:e,x:g?Number(g):.1,w:y?Number(y):.8,y:n.y,h:n.h}}),[w,E]=(0,o.useState)(()=>(0,A.Z)(Number(d))||(g&&p&&h&&y?6:5)),I={x:P.x,y:P.y,w:P.w,h:P.h},D="stl"===f&&4===w,j=(0,C.Z)({cropSource:w,isProductPage:!1,surfaceType:f}),R={cropArea:I,cropSource:w,headerHeight:T,inUnifiedFeedExp:a,isShopTheLookFeed:D,pin:b,pinId:i,queryH:h,queryY:p,requestParams:S,searchResourceOptions:{pin_id:i,crop:I,crop_source:w,is_shopping:D,entry_source:D?"shopping":"flashlight",entrypoint:j},setCropSource:E,setState:K,state:P,surfaceType:f};return a||D?(0,N.jsx)(eI,{...R}):(0,N.jsx)(eC,{...R})}var eR=a(19447);let eO=void 0!==i?i:i=a(328898),eM=void 0!==t?t:t=a(781728);function eN(){let{checkExperiment:e}=(0,m.F)(),l=(0,u.$B)(),{pinId:a}=(0,_.Z)(l.params.id||""),n=e("auth_mweb_graphql_flashlight_pinResource").anyEnabled||e("unauth_mweb_graphql_flashlight_pinResource").anyEnabled,i=(0,g.Z)({strategy:n?"GRAPHQL":"LEGACY",query:eM,variables:{pinId:a},options:{fetchPolicy:"store-or-network"},transformGraphQL:e=>e.v3GetPinQuery?.data,useGetLegacyData:({pinId:e})=>{let{data:l}=(0,y.Z)({name:"PinResource",options:{id:e,field_set_key:"detailed",fetch_visual_search_objects:!0,is_mobile_fork:!0}}),a=(0,eR.S6)()(e);return l??a}}),t=(0,c.Z)(eO,i);return(0,N.jsx)(ej,{pinKey:t})}function eH(){let e=(0,p.ZP)();return(0,N.jsx)(h.Z,{measureGridVisuallyComplete:!0,surface:"visual_search",children:(0,N.jsx)(o.Suspense,{fallback:(0,N.jsx)(d.$j,{accessibilityLabel:e._('Loading Pin data', 'mobileFlashlightPage.loadingPinData', 'accessibility label for pin loading spinner'),show:!0}),children:(0,N.jsx)(eN,{})})})}var eZ=a(270766),ez=a(370179);let eB=function(){let e=(0,s.HG)(),l=(0,r.Z)();return e?l.isAuth?(0,N.jsx)(ez.Z,{}):(0,N.jsx)(eZ.Z,{}):(0,N.jsx)(eH,{})}},585913:e=>{"use strict";e.exports="https://s.pinimg.com/webapp/handle_bottom_left-d4d98c77.svg"},913574:e=>{"use strict";e.exports="https://s.pinimg.com/webapp/handle_bottom_right-ccae4564.svg"},49808:e=>{"use strict";e.exports="https://s.pinimg.com/webapp/handle_top_left-68937c82.svg"},957435:e=>{"use strict";e.exports="https://s.pinimg.com/webapp/handle_top_right-4d7ae997.svg"}},e=>{var l=l=>e(e.s=l);e.O(0,[97270,83119,24797,79968,76594,11930,21876,45170,60588,19881,77488,50257,33731,3642,34851,20749,89418,95036,15071,8753,44132,50686,3807],()=>l(706737)),e.O()}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/www/pin/[id]/visual-search-e18bfb511a0e6848.mjs.map